name: Test Python
on: [ workflow_call ]
jobs:
    test-python:
        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ ubuntu-latest ]
                python-version: [ '3.9', '3.10', '3.11', '3.12', '3.13' ]
        steps:
            # TODO: Remove this when the nightly BTreeCursor is stabilized and released
            -   name: Install Rust
                run: rustup update
            -   uses: actions/checkout@v4
            -   name: Set up Python ${{ matrix.python-version }}
                uses: actions/setup-python@v5
                with:
                    python-version: ${{ matrix.python-version }}
            -   name: Install dependencies
                run: python -m pip install --upgrade pip
            -   name: Install all dependencies
                run: make install
            -   name: Run Tests
                run: make test